<%# Contêiner de toasts no topo-direita %>
<div class="toast-container position-fixed top-0 end-0 p-3" data-controller="flash">
  <% flash.each do |type, message| %>
    <% next if message.blank? %>

    <%# Mapeia tipos do Rails/Devise para classes Bootstrap %>
    <% classes =
      case type.to_s
      when "notice", "success" then "text-bg-success"
      when "alert", "error"    then "text-bg-danger"
      when "warning"           then "text-bg-warning"
      else                           "text-bg-secondary"
      end
    %>

    <div class="toast align-items-center <%= classes %>" role="status" aria-live="polite" aria-atomic="true" data-flash-target="toast" data-bs-autohide="true" data-bs-delay="25000">
      <div class="d-flex">
        <div class="toast-body"><%= message %></div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  <% end %>

  <%# (Opcional) Também exibe erros de validação do recurso atual, se existir %>
  <% if defined?(resource) && resource&.errors&.any? %>
    <% resource.errors.full_messages.each do |msg| %>
      <div class="toast align-items-center text-bg-danger" role="status" aria-live="polite" aria-atomic="true" data-flash-target="toast" data-bs-autohide="false">
        <div class="d-flex">
          <div class="toast-body"><%= msg %></div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
